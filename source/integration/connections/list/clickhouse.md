---
description: Интеграция Loginom с  базой данных ClickHouse. Параметры подключения. Совместимость.
---
# ![ ](./../../../images/icons/common/data-sources/db-clickhouse_default.svg) Подключение ClickHouse

Используется для подключения к базе данных ClickHouse.

## Параметры подключения

При настройке подключения задаются следующие параметры:

* **Метка** — содержит задаваемое пользователем имя подключения.
* **Строка подключения** — строка вида `host[:port][:database]` задается как в отдельном окне, которое вызывается при клике мышью по кнопке ![ ](./../../../images/extjs-theme/form/open-trigger/open-trigger_default.svg), так и вводом параметров вручную. Параметры *port* и *database* опциональные. По умолчанию *port* `9000`, *database* `default`.
* **Тестировать** — тест указанных настроек подключения.
* **Логин** — логин пользователя БД. По умолчанию `default`.
* **Пароль** — пароль пользователя БД. По умолчанию пароль отсутствует.
* **Настройки SSL**  — по кнопке ![ ](./../../../images/extjs-theme/form/open-trigger/open-trigger_default.svg) вызывается диалог установки параметров подключения через безопасное соединение:
  * **Использовать SSL** — при установленном флаге данные передаются по криптографическому протоколу SSL/TLS.
  * **Сертификат CA** — путь к файлу с корневым сертификатом.
  * **Сертификат пользователя** — путь к файлу с клиентским сертификатом.
  * **Приватный ключ** — путь к файлу с приватным ключом.
  * **Пароль приватного ключа** — пароль приватного ключа. По умолчанию пустой.
* **Учитывать временную зону** — выполнять конвертацию из локального времени в UTC и обратно для столбцов типа [DateTime](https://clickhouse.tech/docs/ru/sql-reference/data-types/datetime/). По умолчанию опция включена.
* **Метод сжатия данных** — доступны варианты `Без сжатия` (используется по умолчанию) и `LZ4`.
* **Показывать системные таблицы** — при установке этого флага в мастере импорта, использующего данное подключение, становятся видимы доступные пользователю системные таблицы БД.
* **Обрамлять имена кавычками** — если имена объектов базы данных (например, имена таблиц, полей) содержат пробелы или зарезервированные символы, то необходимо использовать обрамляющие символы, фиксирующие начало и конец имени.
* **Не использовать клиент СУБД** — параметр недоступен, т. к. для подключения к ClickHouse всегда используется встроенный драйвер.
* **Тайм-аут подключения (c)** — задает предельное время подключения, значение по умолчанию 20 секунд. Если импорт из базы данных или экспорт в базу данных будет выполняться в режиме игнорирования ошибок, то в случае неудавшегося подключения в течение установленного времени, соответствующая ошибка будет записана в выходной порт *Статус выполнения* узла Импорт из БД/Экспорт в БД, а при импорте/экспорте в обычном режиме — выполнение узла завершится ошибкой.
* **Тайм-аут блокировки (с)** — устанавливает тайм-аут ожидания снятия блокировки с ресурса (таблицы, строки). Задаётся выпадающим списком с редактируемым полем ввода, которое принимает целые положительные значения. Предустановленный список значений:
  * **По умолчанию** — используется значение по умолчанию сервера БД.
  * **∞** — максимальное значение равное 24 суткам.
  * **Числовые значения** — выбор из следующих значений: 5,10,20,30,60,120.
  
  В ClickHouse тайм-аут блокировки поддерживается с версии 20.4.2.

> **Примечание:**
>
> * Пул подключений не используется.
> * При [экспорте данных в новую таблицу](./../../export/database/new-table-design.md) создается таблица [движка Log](https://clickhouse.tech/docs/ru/engines/table-engines/log-family/log/).
> * В виду ограничений БД ClickHouse:
>   * Не поддерживаются транзакции.
>   * Поддерживаются даты с 1970 до 2106 года.
>   * Не поддерживается обновление существующих записей в таблице.
>   * Удаление по ключу работает только для таблиц с движком из семейства [MergeTree](https://clickhouse.tech/docs/ru/engines/table-engines/#mergetree).

> **Важно:** В таблицах семейства MergeTree операции мутации данных не атомарны (подробнее см. [Мутации](https://clickhouse.tech/docs/ru/sql-reference/statements/alter/#alter-mutations)). Поскольку мутации используются при выполнении операции экспорта с удалением по ключу, то факт активации узла экспорта не гарантирует завершение процесса удаления записей. Длительность выполнения мутации пользователем не контролируется. Т.о. запрос на выборку данных, заданный непосредственно после выполнения узла экспорта с удалением по ключу, может вернуть старые записи.
Данную особенность БД ClickHouse следует учитывать при проектировании систем.

## Совместимость

Версии БД ClickHouse 19.1 и выше.

**Смотри также:**
* [Документация ClickHouse](https://clickhouse.tech/docs/ru/)