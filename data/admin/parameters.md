---
description: Справка по общим настройкам сервера или приложения Loginom. Управление папками, интеграция с LDAP, параметры логирования. Установка подключения. Настройка компонентов "Выполнение программы" и "Python". 
---
# ![Параметры](./../images/icons/common/admin-system-objects/properties_default.svg)  Параметры

На странице «Параметры» можно просмотреть и изменить общие настройки сервера/приложения.

В верхней части страницы расположено две кнопки:

* ![Сохранить](./../images/icons/common/toolbar-controls/save_default.svg) **Сохранить** — сохраняет полученные изменения параметров;
* ![Обновить](./../images/icons/common/toolbar-controls/refresh_default.svg) **Обновить** — подгружает параметры, используемые в данный момент.

> **Примечание:** по завершении корректировки параметров необходимо нажать кнопку ![](./../images/icons/common/toolbar-controls/save_default.svg) *Сохранить*.

## Папки

Параметры данной группы задают каталоги для хранения файлов в серверных редакциях платформы, изменения вступают в силу после перезапуска службы сервера.

В настольных редакциях платформы данная группа параметров отсутствует.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Личные данные пользователя|UserStorage|Параметр отвечает за название каталога, в котором располагаются личные каталоги [пользователей](./users/README.md) и создаваемые в [Общие папки](./shared-folder.md)|
|Резервные копии сессии|SessionBackup|Параметр задает название каталога для резервных копий сессий|

Физически все папки пользователей располагаются на сервере по следующему пути: `"C:\ProgramData\Loginom\Server\UserStorage"`. Этот путь можно изменить в конфигурационных файлах сервера Loginom. Кроме доступа к личной папке, администратором сервера пользователю могут быть предоставлены права на доступ к другим папкам файлового хранилища.

Личная папка пользователя имеет то же наименование, что и его учетная запись (логин).

Путь к файлу или пакету внутри файлового хранилища задается относительно папки UserStorage. Пример:

* полный путь к пакету: `"C:\ProgramData\Loginom\Server\UserStorage\<user>\test.lgp"`, где `<user>` — логин пользователя;
* путь к пакету внутри файлового хранилища: `<user>/test.lgp`.

## Параметры LDAP

Интеграция с LDAP доступна только в серверной редакции Enterprise.

Параметры данной группы отсутствуют в серверных редакциях Team и Standard, а также в настольных редакциях (Personal и Community).

Изменения настроек для подключения к [LDAP](./ldap.md) серверу вступают в силу после нажатия кнопки ![](./../images/icons/common/toolbar-controls/save_default.svg) *Сохранить*.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Хост||Доменное имя хоста (либо IP-адрес) LDAP сервера. По умолчанию задан пустой строкой, и в этом случае не производится проверка LDAP пользователей. |
|Порт|389|Номер порта для подключения к серверу LDAP. По умолчанию 389 для обычного соединения или 636 для SSL соединения.|
|Безопасность соединения|Обычное соединение|Позволяет задать защищенное (SSL/TLS) соединение к LDAP по специальному порту (636 по умолчанию) или получение защищенного соединения (STARTTLS) на обычном порту через STARTTLS. По умолчанию обычное (незащищенное) соединение.|
|Использовать SASL|false|Использование механизма SASL с DIGEST-MD5 шифрованием пароля для аутентификации пользователя. Используется для защищенной передачи пароля по незащищенному соединению.|
|Учетная запись||DN пользователя с правами на чтение LDAP (поиск пользователей и групп). Учетная запись для подключения к LDAP должна располагаться в контейнере, указанном в параметре Базовый домен. Можно использовать domain\user формат или UPN(<user@domain.com>), если LDAP сервер позволяет это делать. По умолчанию используется пустое имя и пустой пароль, что означает анонимный доступ к LDAP.|
|Пароль||Пароль к служебной учетной записи на чтение из LDAP|
|Базовый домен||Доменное имя каталога `ou=users,dc=domain,dc=com`, в котором производится поиск пользователей|
|Фильтр LDAP|(objectClass=user)|Фильтр пользователей, в котором может быть также произведена проверка принадлежности пользователя группе. Например, фильтр для Active Directory может быть `(&(objectClass=user)(memberOf:1.2.840.113556.1.4.1941:=cn=test,ou=groups,dc=domain,dc=com))`, для OpenLDAP — `(objectClass=posixAccount)`, где использование расширения `:1.2.840.113556.1.4.1941:`  для Active Directory дает возможность использовать сопоставление и по вложенным группам (можно использовать только для Active Directory). Для фильтров в OpenLDAP может потребоваться дополнительная настройка.
|Атрибут с именем пользователя|sAMAccountName|Имя атрибута в записи пользователя, который содержит имя пользователя используемое при подключении и [автоматическом добавлении пользователя](./ldap.md#avtomaticheskoe-dobavlenie-polzovatelya) Loginom при успешной LDAP аутентификации. Для Active Directory это обычно — `sAMAccountName`, а для OpenLDAP — `uid`. |
|Атрибут с полным именем пользователя|displayName|Имя атрибута в записи пользователя, который содержит полное имя пользователя. Полное имя пользователя используется для уточнения владельца аккаунта в списке Пользователей. |
|Роль нового пользователя|Отсутствует|Параметр задает [роль пользователю](./users/roles.md) ("Проектирование сценариев" или "Просмотр отчетов") при автоматическом добавлении нового пользователя с аутентификацией через LDAP. По умолчанию пользователю, создаваемому через LDAP, роль не назначается. Для пользователя, создаваемого с ролью "Проектирование сценариев", будут предоставлены права на публикацию пакетов (см. подробнее [Пользователи](./users/README.md)).|

## Параметры безопасности

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Лимит попыток ввода пароля|Отключено|Лимит, при достижении которого пользователь больше не сможет авторизоваться до тех пор, пока не истечет *Тайм-аут ввода пароля*. История неудачных попыток ввода пароля сбрасывается при перезапуске Loginom Server. Если будет превышено максимальное количество неудачных попыток входа в учётную запись с ролью "Пакетное выполнение", то до истечения тайм-аута ввода пароля станет недоступным выполнение пакетов из-под этой учётной записи через Integrator и BatchLauncher. Минимальное значение - 1 попытка, максимальное - 10000 попыток.|
|Тайм-аут ввода пароля (сек)|∞|Время ограничения, накладываемого на пользователя, превысившего *Лимит попыток ввода пароля*. Ограничение распространяется на все учётные записи, в том числе учётные записи с ролями *Администрирование* и *Пакетное выполнение*. Минимальное значение - 1 секунда, максимальное - 2000000 секунд, либо ∞. В случае, если установлен бесконечный тайм-аут (∞), то при достижении лимита попыток ввода пароля, пользователь больше не сможет залогиниться до тех пор, пока не будет перезапущен Loginom Server, либо администратор не изменит *Тайм-аут ввода пароля* или *Лимит попыток ввода пароля*.|

## Параметры логирования

Параметры данной группы задаются как в серверных, так и в настольных редакциях платформы и определяют правила формирования лог-файла (журнала регистрации, в котором фиксируется выполнение каждого узла, что позволяет в случае возникновения ошибки выявить ее местоположение и возможную причину).

Изменения вступают в силу после нажатия кнопки ![](./../images/icons/common/toolbar-controls/save_default.svg) *Сохранить*.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
| [Уровень логирования](./log.md)|Информация|Здесь указывается способ и полнота заполнения лог-файла (*Трассировка*, *Отладка*, *Информация*, *Событие*, *Предупреждение*, *Ошибка* и *Авария*)|
|Трассировка исключений|false|Включает/отключает отладочный режим работы. При включенном отладочном режиме в лог-файл записывается расширенная информация для диагностики ошибок. Формирование расширенной информации при отладочном режиме работы приводит к потере производительности, поэтому в обычном режиме работы  трассировка исключений должна быть отключена. По умолчанию отладочный режим работы выключен.|
|Имя файла|app.log|Параметр содержит имя лог-файла. Задается путем относительно папки Logs. По умолчанию для серверной редакции файл находится в `"C:\ProgramData\Loginom\Server\Logs"`, а для Desktop редакции в `"C:\Users\User\AppData\Roaming\Loginom\Personal\Logs"`.|
|Перезапись файла|false|Флаг пересоздания файла логирования при запуске приложения, вместо его дополнения. При значении true при каждом запуске лог-файл будет перезаписывать старый.|
|Максимальный размер файла|10484760|Максимальный размер лог-файла, задается в байтах. При превышении данного размера, файл сохраняется с расширением .1 и создается новый. Например, старый файл app.log при превышении указанного размера сохранится как app.log.1, а взамен ему будет создан новый app.log, где и продолжится ведение журнала.|
|Количество резервных файлов|10|Количество резервных копий, создаваемых при превышении максимального размера лог-файла. При превышении размера файла и создании нового файла логирования, старый файл получает расширение .1, со сдвигом старых сохраненных файлов на `+1: .2, .3, ..., .<максимальный индекс>`, старый резервный файл app.log.1 станет app.log.2, а если на момент добавления резервного файла уже был достигнут лимит, то самый старый файл лога удаляется. При значении  < 1 старые файлы логов не сохраняются.|

## Параметры подключения

Изменения параметров подключения вступают в силу после перезапуска службы сервера.

Параметры данной группы отсутствуют в настольных редакциях Loginom.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Прослушиваемые адреса|0.0.0.0|Адрес или адреса, проверяемые на наличие сервера|
|TCP порт|4580|Порт, используемый для соединения с сервером|
|WebSocket порт|8080|Порт, используемый для обмена сообщениями с сервером|
|WebSocket SSL/TLS порт| если настроено WSS (WebSocket Secure), то 8443, иначе null|Защищенный порт, используемый для обмена сообщениями с сервером|
|Имя файла сертификата||Путь к файлу сертификата, используемого для SSL-соединения. Задается абсолютным путем или относительным (корневой каталог `"C:\ProgramData\Loginom\Server"`).|
|Имя файла закрытого ключа||Путь к файлу ключа, используемого для SSL-соединения. Задается абсолютным путем или относительным (корневой каталог `"C:\ProgramData\Loginom\Server"`).|
|Период проверки соединения (сек.)|Отключено|Промежуток времени между проверками соединения с клиентом. Необходим для автоматического определения разрыва сетевого соединения и закрытия соответствующей сессии клиента вместе с открытыми в ней пакетами. Проверка состояния канала связи сервера с клиентом реализуется с помощью специального сообщения, которое периодически отправляется клиенту в том случае, если в течение заданного интервала времени на сервер не приходит ни одного сообщения с клиента. Если же с клиента приходит любое сообщение, то таймер сбрасывается, т.е. специальное сообщение отправляется только в том случае, если по каналу связи долго не приходило ни одного входящего сообщения. Проверку соединения сервера с клиентом можно отключить, для этого необходимо стереть значение периода проверки, сохранить настройки и перезагрузить сервер. Отключение проверки соединения может привести к блокировке пакетов сервером, т.к. сервер не сможет определить разрыв связи с клиентом и будет считать, что пакет все еще используется клиентом. В случае включенного параметра и небольшого таймаута, связь после разрыва соединения может не восстановиться.|

Возможные значения портов задаются в числовом формате в интервале от 0 до 65535.

## Параметры сервера

Изменения параметров, определяющих режим функционирования сервера, вступают в силу после нажатия кнопки ![](./../images/icons/common/toolbar-controls/save_default.svg) *Сохранить*.

> **Примечание:** в настольных редакциях данная группа параметров называется *Параметры приложения* и включает в себя только параметры *Размер пула потоков* и *Локаль*.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Размер пула пакетов|10|Количество часто используемых в пакетной обработке пакетов Loginom Integrator, сохраненных для быстрого вызова|
|Размер пула потоков| По умолчанию| Максимальное количество ставших неактивными после использования потоков, которые не удаляются и держатся в памяти для возможного последующего использования. Значение по умолчанию — *Количество ядер CPU* * 32. Максимальное значение — 1 000 000. Увеличение параметра позволяет быстрее работать при большом количестве параллельных операций. Уменьшение параметра — это потенциальное снижение потребления памяти.|
|Таймаут остановки сервера (сек.)|10|Время, выделяемое серверу на завершение работы. Минимальное значение равно 0.|
|Локаль|Не задана(...)[^1]|Задаёт локаль сервера/приложения *Loginom*. Локаль применяется только после перезагрузки сервера/приложения *Loginom*|

[^1]: В серверных редакциях локаль задаётся в процессе установки, в настольных — определяется при первом запуске в соответствии с региональными настройками текущего пользователя.

> **Важно:** после смены локали некоторые узлы, например, [Сортировка](./../processors/transformation/sorting.md), [Экспорт в текстовый файл](./../integration/export/txt-csv.md) и др. могут работать по-другому.

## Параметры компонента: Выполнение программы

Внесенные изменения вступают в силу после нажатия кнопки ![](./../images/icons/common/toolbar-controls/save_default.svg) *Сохранить*.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Выполнение запрещено|true|Параметр запрещает выполнение узла [*Выполнение программы*](./../processors/integration/exec-program.md), если выставлено значение true, и позволяет выполнять узел при значении false|

> **Примечание:** в настольных редакциях *Выполнение программы* по умолчанию разрешено, при необходимости его можно запретить.

## Параметры компонента: Python

Внесенные изменения вступают в силу после нажатия кнопки ![](./../images/icons/common/toolbar-controls/save_default.svg) *Сохранить*.

|Параметр|Значение по умолчанию|Описание|
|:-|:-|:-|
|Выполнение запрещено|true|Параметр запрещает выполнение узла *Python*, если выставлено значение true, и позволяет выполнять узел при значении false|
|Путь библиотеки| |Определяет путь к файлу python3x.dll, где x — номер минорной версии, разделяемой библиотеки Python. Указывается опционально. По умолчанию используется установленный Python последней версии, зарегистрированный в операционной системе. Если в параметре путь не задан, то осуществляется его автоматический поиск в переменной окружения `PYTHONHOME` и реестре. Самый простой способ узнать путь до библиотеки python3x.dll — воспользоваться командной строкой в Windows. Для этого необходимо открыть консоль «Командная строка» («CMD») и ввести запрос «where python*.dll» (в качестве примера была выбрана для отображения версия Python 3.9). Ответом будет полный путь до необходимой библиотеки. ![Путь к библиотеке Python через командную строку](./cmd_python.png)|
|Путь интерпретатора| |Определяет путь к исполняемому файлу интерпретатора, который выполняет скрипт из узла *Python* в режиме выполнения Python в отдельном процессе. Кроме того этот путь учитывается в режиме выполнения узла Python при [поиске модулей внутри процесса Loginom](#poisk-moduley-python-vnutri-protsessa-loginom). По умолчанию *Путь интерпретатора* задается: 1. в *Windows* аналогично поиску разделяемой библиотеки; 2. в *Linux* следующим образом: а. определяется домашняя директория Python: если в переменной окружения `PYTHONHOME` указан действительный путь в системе, то берётся он, иначе домашняя директория равна `/usr`, б. оносительно домашней директории исполняемый файл интерпретатора ищется по пути `/bin/python3`, в. если исполняемый файл не найден, то выполняется python3 без указания пути.|
|Передавать переменные окружения узла|false|Параметр необходим для запуска процесса Python в изолированном окружении. При значении true в процесс Python добавляются переменные окружения: `LAUNCHER_PATHS` — примонтированные в файловое хранилище пути, разделенные `:` (Linux) или `;` (Windows), `LAUNCHER_USER` — имя пользователя Loginom, `LAUNCHER_USER_TMP` и `LAUNCHER_COMMON_TMP` — пути папок для сохранения временных файлов пользователя и рабочей директории, `LAUNCHER_PIPEDIR` — имя папки, в которой создаются файлы именованных каналов для IPC (Linux), `LAUNCHER_PIPENAME` — имя дуплексного именованного канала для IPC (Windows), `LAUNCHER_CURRENTDIR` — имя текущей папки Loginom (совпадает с путём сохранённого пакета), `LAUNCHER_LOCALE` — имя текущей локали (например, `ru_RU`), `LAUNCHER_NODE_GUID` — GUID узла, `LAUNCHER_NODE_NAME` — имя узла, `LAUNCHER_NODE_DISPLAYNAME` — метка узла, `LAUNCHER_PREVIEW` — устанавливается для Предпросмотра.|

Для работы узлов *Python* необходимо учитывать следующие особенности и ограничения:

* Минимальная поддерживаемая версия Python — 3.5.
* Максимальная протестированная версия Python — 3.10.
* Создание GUI-интерфейса из кода Python не является целевым назначением компонента *Python* и в некоторых случаях может приводить к неверной работе приложения. Например:
  * работа узла не будет прекращена до завершения работы GUI-приложения. При работе в серверных редакциях Loginom пользователь, как правило, не имеет доступа к окну GUI-приложения.

Для работы узлов *Python* в изолированном окружении пользователя необходимо сделать следующее:

* В Администрировании, в параметрах компонента Python включить опцию "Передавать переменные окружения узла".
* В параметре "Путь интерпретатора" указать полный путь к bash-скрипту — **python_run.sh** (или аналогичному).
* Для запуска на Linux должен быть установлен *Docker* или *Podman*. В **python_run.sh** имеется параметр `DOCKER_OR_PODMAN`, отвечающий за способ контейниризиции, значение по умолчанию — `podman`.
* Должен быть подготовлен базовый docker образ c Python и нужными Python пакетами внутри. В **python_run.sh** имя образа прописывается в параметре `IMAGE_NAME`, значение по умолчанию — `python`.

В **python_run.sh** имеется параметр `CONTAINER_OPTIONS`, в который можно передавать настройки контейнера, например, значение переменной `oom-score-adj`. По умолчанию устанавливается значение `oom-score-adj=1000`. То есть если OOM Killer будет необходимо завершить какой-либо процесс, то контейнер будет первым кандидатом для этого.

Для работы узлов *Python* внутри процесса Loginom необходимо учитывать следующие особенности и ограничения:

* В системе должен быть [установлен Python](https://www.python.org/downloads/) одной разрядности с приложением/сервером Loginom.
* Python из дистрибутива Anaconda не поддерживается.
* Не поддерживаются модули пакета [multiprocessing](https://docs.python.org/3/library/multiprocessing.html).
* Создание GUI-интерфейса из кода Python не является целевым назначением компонента *Python* и в некоторых случаях может приводить к неверной работе приложения. Например:
  * для работы `matplotlib` с бэкэндом [Qt](https://wiki.qt.io/About_Qt) и в целом с [PyQt](https://riverbankcomputing.com/software/pyqt/intro) требуется наличие файла [qt.conf](https://doc.qt.io/qt-5/qt-conf.html) с путями к библиотекам/плагинам Qt. При невозможности их найти, приложение Loginom будет принудительно завершено с сообщением об ошибке.
* Оставленные незавершенными фоновые потоки могут приводить к аварийному завершению приложения.
* В случае критических ошибок python3x.dll может аварийно завершить приложение. Рекомендуется использовать предварительно отлаженный код Python.
* Одновременно может выполняться только один узел *Python*.
* Остановить выполнение узла *Python* можно только между инструкциями интерпретатора.
* [Виртуальные окружения](https://docs.python.org/3/library/venv.html) возможно использовать при задании *Путь интерпретатора*. Для этого путь интерпретатора должен указывать на python.exe внутри виртуального окружения [подробнее о поиске модулей Python внутри процесса Loginom](#poisk-moduley-python-vnutri-protsessa-loginom). Для корректной работы версия python.exe в виртуальном окружении и версия python3x.dll, через которую выполняется код узла, должны совпадать.

> **Примечание:** для настольных редакций выполнение узла *Python* по умолчанию разрешено, при необходимости выполнение можно запретить.

> **Примечание:** под Linux не поддерживается режим выполнения Python внутри процесса Loginom, следовательно, нет и настройки *Путь библиотеки*. Узлы *Python*, настроенные на выполнение внутри процесса, на Linux будут выполняться в отдельном процессе.

### Поиск модулей Python внутри процесса Loginom

Путь к папке, в которой расположен интерпретатор, добавляется как ещё один путь в `sys.path` — список путей, по которым ищутся модули.

Если на один каталог выше каталога *Путь интерпретатора* существует файл с именем `pyvenv.cfg`, то `sys.prefix` и `sys.exec_prefix` устанавливаются равными этому каталогу, и проверяется наличие `site-packages`. Найденный `site-packages` добавляется в `sys.path`. Если `pyvenv.cfg` содержит ключ `include-system-site-packages` и его значение не равно true, то базовый путь `site-packages` (относительно `sys.base_prefix`) не включается в `sys.path`.
