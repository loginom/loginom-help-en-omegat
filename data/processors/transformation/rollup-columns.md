# ![Свёртка столбцов](../../images/icons/components/column-flipping_default.svg) Свёртка столбцов

Обработчик предназначен для транспонирования таблицы. При этом заголовки выбранных столбцов переносятся в значения строк, а их данные — в один столбец. Поскольку в этот столбец могут перемещаться данные разных [типов](../../data/datatype.md), то для них используется тип данных ![Переменный](../../images/icons/data-types/variant_default.svg) *Переменный*.

%spoiler%Example:%spoiler%

Исходный набор данных:

| Код клиента | Месяц | Кол-во SMS | Кол-во минут вх | Статус | Наличие скидки |
| ----------: | :---- | ---------: | --------------: | :----- | :------------- |
| 1 | август | 81 | 506 | постоянный | True |
| 1 | сентябрь | 32 | 231 | не постоянный | False |

Выполним свертку столбцов. Поля `Код клиента` и `Месяц` выберем как ![Информационные](../../images/icons/usage-types/unspecified_default.svg) *Информационные*. А `Кол-во SMS` (![Целый тип](../../images/icons/data-types/integer_default.svg)*Целый тип*), `Кол-во минут вх` (![Целый тип](../../images/icons/data-types/integer_default.svg)*Целый тип*), `Статус` (![Строковый тип](../../images/icons/data-types/string_default.svg)*Строковый тип*), `Наличие скидки` (![Логический тип](../../images/icons/data-types/boolean_default.svg)*Логический тип*), выберем ![Транспонируемые](../../images/icons/dataset-operations/dsa-flipping_default.svg) *Транспонируемыми*.

Результирующий набор данных:

| Код клиента | Месяц | Имена | Метки | Значения | Типы данных |
| ----------: | :---- | :---- | :---- | :------- | ----------: |
| 1 | август | COL3 | Кол-во SMS | 81 | 4 |
| 1 | август | COL4 | Кол-во минут вх | 506 | 4 |
| 1 | август | COL5 | Статус | постоянный | 5 |
| 1 | август | COL6 | Наличие скидки | True | 1 |
| 1 | сентябрь | COL3 | Кол-во SMS | 32 | 4 |
| 1 | сентябрь | COL4 | Кол-во минут вх | 231 | 4 |
| 1 | сентябрь | COL5 | Статус | не постоянный | 5 |
| 1 | сентябрь | COL6 | Наличие скидки | False | 1 |

%/spoiler%

## Input

* ![Input data source](../../images/icons/app/node/ports/inputs/table_inactive.svg) **Input data source** denotes a port for connection of the input data set.

### Output

* ![Выходной источник данных](../../images/icons/app/node/ports/inputs/table_inactive.svg) **Выходной набор данных** — на порт выводится таблица с транспонированным набором данных.

## Wizard

The wizard window is divided into two areas: available fields (leftward) and selected fields (rightward).

* **Available fields** contains a list of fields of the input data set.
* **Выбранные поля** — делится на списки.
   * ![Информационные](../../images/icons/usage-types/unspecified_default.svg) **Информационные** — содержит поля, которые не будут изменяться.
   * ![Транспонируемые](../../images/icons/dataset-operations/dsa-flipping_default.svg) **Транспонируемые** — на основе этих полей будут сформированы 4 новых столбца: *Имена*, *Метки*, *Значения*, *Типы данных*.

Для настройки требуется переместить поля входного набора в списки *Информационные* или *Транспонируемые*, перетаскивая их мышью. Также это можно сделать при помощи кнопок перемещения.

Результирующий набор данных содержит:

* Столбцы исходного набора данных из списка *Информационные*. Их значения никак не изменяются.
* Сформированные обработчиком столбцы.
   * **Имена** — столбец с именами транспонируемых столбцов.
   * **Метки** — столбец с метками столбцов.
   * **Значения** — этот столбец содержит все значения транспонируемых столбцов, т.к. эти столбцы могут иметь разный тип (как это показано в примере), то столбец Значения имеет тип данных ![Переменный](../../images/icons/data-types/variant_default.svg) *Переменный*.
   * **Типы данных** — столбец, содержащий информацию о типе данных значений. Типы в данном столбце обозначаются цифрами.
      * **0** — ![Неопределенный](../../images/icons/data-types/none_default.svg) *Неопределенный*.
      * **1** — ![Логический](../../images/icons/data-types/boolean_default.svg) *Логический*.
      * **2** — ![Дата/время](../../images/icons/data-types/datetime_default.svg) *Дата/время*.
      * **3** — ![Вещественный](../../images/icons/data-types/float_default.svg) *Вещественный*.
      * **4** — ![Целый](../../images/icons/data-types/integer_default.svg) *Целый*.
      * **5** — ![Строковый](../../images/icons/data-types/string_default.svg) *Строковый*.
      * **6** — ![Переменный](../../images/icons/data-types/variant_default.svg) *Переменный*.

При установке флага *Игнорировать пустые значения* обработчик не будет включать в результирующий набор строки с пустыми значениями в транспонируемых полях.
