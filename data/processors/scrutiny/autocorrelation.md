# ![ ](../../images/icons/components/autocorrelation_default.svg) Autocorrelation

## Description

**[Autocorrelation](https://wiki.loginom.ru/articles/autocorrelation.html)** — это понятие математической статистики, которое характеризует степень статистической взаимосвязи между элементами данных одного временного ряда. Иными словами, вычисляется корреляция между временным рядом и его копией, сдвинутой на один или несколько временных отсчетов. Обработчик позволяет вычислять автокорреляцию временных рядов, количество отсчетов выбирается пользователем.

%spoiler%Example:%spoiler%

Исходная таблица:

| День недели | Дата | Продано билетов в кино, тысяч шт. |
| :----------- | :---- | ---------------------------------: |
| Пн | 21.08.2017 | 6 |
| Вт | 22.08.2017 | 8 |
| Ср | 23.08.2017 | 13 |
| Чт | 24.08.2017 | 10 |
| Пт | 25.08.2017 | 19 |
| Сб | 26.08.2017 | 24 |
| Вс | 27.08.2017 | 22 |
| Пн | 28.08.2017 | 7 |
| Вт | 29.08.2017 | 6 |
| Ср | 30.08.2017 | 10 |
| Чт | 31.08.2017 | 15 |
| Пт | 01.09.2017 | 17 |
| Сб | 02.09.2017 | 26 |
| Вс | 03.09.2017 | 24 |

Применим автокорреляционный анализ к полю "Продано билетов в кино, тысяч шт.", задав ему параметр ![ ](../../images/icons/usage-types/active_default.svg) "Используемое" в настройках входного порта. В мастере настройки количество отсчетов определим равным десяти.

Выходная таблица:

| Лаг | АКФ | Ошибка | Значимость |
| ------: | ------: | ------------: | :-------------------- |
| 0 | 1.00 | 0.00 | True |
| 1 | 0.51 | 0.27 | True |
| 2 | -0.09 | 0.33 | False |
| 3 | -0.38 | 0.33 | True |
| 4 | -0.46 | 0.36 | True |
| 5 | -0.36 | 0.40 | False |
| 6 | 0.09 | 0.42 | False |
| 7 | 0.46 | 0.42 | True |
| 8 | 0.34 | 0.46 | False |
| 9 | 0.03 | 0.48 | False |

%/spoiler%

## Ports

### Input

* ![ ](../../images/icons/app/node/ports/inputs/table_inactive.svg) Входной источник данных (таблица данных). В настройках этого порта следует выставить назначение ![ ](../../images/icons/usage-types/active_default.svg) "Используемое" полям, для которых нужно рассчитать автокорреляцию. Для этого пригодны только поля числовых типов.

### Output

* ![ ](../../images/icons/app/node/ports/outputs/table_inactive.svg) Выходной набор данных. Таблица имеет следующую структуру:
   * Обязательные поля:
      * **Лаг** — количество отсчетов, на которое сдвинут исходный ряд чисел относительно его копии;
      * **АКФ** — коэффициенты автокорреляции для каждого лага;
      * **Ошибка** — стандартные ошибки коэффициентов корреляции для последовательности лагов данного диапазона;
      * **Значимость** — условный вывод о наличии/отсутствии корреляции на данном лаге.
   * Поля, наличие которых задается пользователем:
      * **ЧАКФ** — коэффициенты частной автокорреляционной функции. Для добавления данного поля следует выставить соответствующий флаг в мастере настройки.

## Wizard

Включает три настройки:

* **Количество отсчетов** — определяет максимальный сдвиг (лаг) исходного ряда чисел относительно его копии. Для каждого количества отсчетов впоследствии вычисляется коэффициент автокорреляции. Количество отсчетов не может быть больше, чем количество строк в исходной таблице.
* Область расчета АКФ:
   * **временная** — рекомендуется при обработке небольшого количества отсчетов;
   * **частотная** — рекомендуется при обработке большого количества отсчетов для ускорения вычислений;
   * **автоматически** — обработчик определит область расчета, исходя из количества отсчетов самостоятельно.
* **Рассчитывать ЧАКФ** — наличие данного флага добавляет вычисление частной автокорреляционной функции. Ее отличительной особенностью является исключение корреляционной зависимости между наблюдениями внутри лагов, т.е. частная автокорреляционная функция на каждом лаге отличается от обычной автокорреляционной функции на величину удаленных автокорреляций с меньшими временными лагами. Следовательно, частная автокорреляционная функция более точно характеризует автокорреляционные зависимости внутри временного ряда.
