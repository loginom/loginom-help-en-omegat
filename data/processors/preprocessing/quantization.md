# ![ ](../../images/icons/components/binning_default.svg) Binning

## Description

Обработчик разбивает диапазон значений выбранных полей исходного набора на конечное число интервалов. Для разбиения возможно применение различных алгоритмов (см. далее методы квантования), а также использование [внешних таблиц](./quantization/outdoor-ranges.md) с заданными интервалами квантования. Квантование применяется к данным с типами: целый, вещественный и дата/время (см. [data types](../../data/datatype.md)).

### Input

* ![ ](../../images/icons/app/node/ports/inputs/table_inactive.svg) Input data source (data table).
* ![ ](../../images/icons/app/node/ports/add/add_inactive_default.svg) Add another port. External Binning Bins (Data Table).

### Output

* ![ ](../../images/icons/app/node/ports/outputs/table_inactive.svg) Output data set (data table). [Описание структуры](./quantization/calculated-columns.md) результирующего набора.
* ![ ](../../images/icons/app/node/ports/outputs/table_inactive.svg) Диапазоны для квантования (таблица данных). [Описание структуры](./quantization/ranges-quantization.md) таблицы диапазонов.

## Wizard

Мастер настройки состоит из двух основных областей:  область настройки параметров квантования  и область  отображения результатов квантования. Обе области организованы в виде таблицы. Над ними располагается строка состояния входа.

### Область настройки параметров квантования

Область представлена в виде таблицы. Над полями расположены три кнопки:

* ![ ](../../images/icons/toolbar-controls/edit_default.svg) Редактировать — при нажатии позволяет редактировать параметры квантования для выбранного поля;
* ![ ](../../images/icons/toolbar-controls/dec-decimal-places-count_default.svg) Уменьшить разрядность — каждое нажатие кнопки уменьшит разрядность границ интервалов на один знак после запятой;
* ![ ](../../images/icons/toolbar-controls/inc-decimal-places-count_default.svg) Увеличить разрядность — каждое нажатие кнопки увеличит разрядность границ интервалов на один знак после запятой.

Таблица этой области состоит из нескольких столбцов:

* **Поле** — содержит поля исходного набора данных, к которым применима процедура квантования. Это поля типа: целый, вещественный,  дата/время.
* **Метод** — поле представлено раскрывающимся списком, из которого необходимо выбрать метод квантования:
   * Ширина — пользователь может выбирать ширину интервала, а количество интервалов рассчитывается автоматически, как отношение разности верхней и нижней границ к заданной ширине. Выставив соответствующие флаги, можно задать:
      * Верхнюю границу — верхняя граница самого высокого интервала;
      * Нижнюю границу — нижняя граница самого высокого интервала.
   * Количество — выбирается количество интервалов, а ширина рассчитывается автоматически, как отношение разности верхней и нижней границ к заданному количеству интервалов. Для этого метода так же можно задать верхнюю и нижнюю границы.
   * Плитка — пользователь выбирает количество интервалов, а компонент задает диапазоны интервалов таким образом, чтобы в каждом интервале было примерно одинаковое количество значений. Имеется несколько способов обработки совпадающих значений:
      * Добавлять в следующий — перенесет значения совпадающих наблюдений в следующий (более высокий) интервал разделения.
      * Сохранять в текущем — сохраняет значения совпадающих наблюдений в текущем (более низком) интервале разделения. Этот метод может привести к тому, что всего будет создано меньше интервалов.
      * Назначать случайно — типы границ интервалов будут определены случайно; возможно включение одинаковых значений в тот или иной интервал случайным образом.
      * Оставить как есть — границы всех интервалов будут иметь тип **>=**, и возможна ситуация, когда совпадающие значения окажутся в разных интервалах.
      * Одинаковые плитки — достижение равного количества значений в интервалах обеспечивается не только подбором диапазонов интервалов, но и подбором типов границ для каждого интервала (**>** или **>=**).
   * [Коэффициенты СКО](https://wiki.loginom.ru/articles/mean-square-deviation.html) — разбивает значения на интервалы в зависимости от выбранного диапазона, выраженного в количестве **σ** (СКО).
   * [Внешние диапазоны.](./quantization/outdoor-ranges.md)

      Для всех методов квантования можно установить флаг *Округлять границы*.
* **Автоматически** — установленная галочка в этом поле обеспечивает автоматическую настройку параметров квантования выбранного метода.
* **Интервалов** — количество интервалов, на которые будут разбиты значения поля.
* **Минимум** — отображается минимальное значение квантуемого поля.
* **Максимум** — отображается максимальное значение квантуемого поля.

Далее в каждой строке  располагается кнопка ![ ](../../images/icons/toolbar-controls/refresh_default.svg)"рассчитать интервалы" и в шапке таблицы ![ ](../../images/icons/toolbar-controls/refresh_default.svg)"рассчитать все интервалы". При их нажатии пересчитываются параметры квантования (количество интервалов, минимум, максимум) в зависимости от изменения методов и/или настроек параметров. Этот функционал доступен только при состоянии "Вход активирован".

### Область  отображения результатов квантования

В этой области отображаются результаты квантования с возможностью их редактирования.  
Над полями таблицы расположены несколько элементов управления:

* ![ ](../../images/icons/checkbox-states/checked_default.svg) **Нижняя граница открыта** — убирает нижнюю границу;
* ![ ](../../images/icons/checkbox-states/checked_default.svg) **Верхняя граница открыта** — убирает верхнюю границу;
* ![ ](../../images/icons/toolbar-controls/invert-bound-type_default.svg) **Инвертировать тип** — меняет тип границ;
* ![ ](../../images/icons/toolbar-controls/calculate-barchart_default.svg) — пересчитывает гистограмму согласно новым параметрам.
* **Шаблон** — в этом поле происходит настройка шаблона для отображения метки интервала, в нем можно составить пользовательский шаблон или при нажатии на ![ ](../../images/icons/toolbar-controls/down_default.svg) выбрать один из готовых шаблонов. Чтобы применить шаблон необходимо нажать кнопку ![ ](../../images/icons/toolbar-controls/apply_default.svg).
* **Образец** — при клике на эту кнопку открывается таблица обозначений, которые можно использовать при составлении шаблона.

Под элементами управления расположена таблица с результатами квантования выделенного поля, она содержит следующие поля:

* **№** — номер интервала;
* **Нижняя** — нижняя граница интервала;
* **Тип** — тип границы;
* **Верхняя** — верхняя граница интервала;
* **Метка** — метка интервала (ее можно задавать шаблоном);
* **Объём** — отображает объем значений, попавших в интервал (отображается в виде гистограммы).
