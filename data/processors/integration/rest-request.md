# ![ ](../../images/icons/data-sources/web-rest-client_default.svg) REST-запрос

Компонент позволяет взаимодействовать с внешним [REST-сервисом](https://ru.wikipedia.org/wiki/REST), отправляя ему [GET](https://ru.wikipedia.org/wiki/HTTP#GET) или [POST](https://ru.wikipedia.org/wiki/HTTP#POST) запросы и получая ответы. В качестве входного набора данных используется таблица с параметрами запросов. REST-сервису будет отправлено столько запросов, сколько строк во входном наборе данных.

> **Примечание**: Поскольку входной набор данных с параметрами запросов является необязательным, то при его отсутствии узел вызова REST-сервиса отправит единичный запрос без параметров.

В выходных портах обработчика формируются:

- Таблица ответов сервиса;
- Дополнительные данные о результатах выполнения каждого запроса.

В случае отправки GET-запросов, каждая строка входного набора должна содержать параметры GET-запроса, а при POST-запросах — [тело HTTP-запроса](https://ru.wikipedia.org/wiki/HTTP#Тело_сообщения). При настройке узла задается произвольное количество [заголовков HTTP-запроса](https://ru.wikipedia.org/wiki/HTTP#Заголовки).

Для работы с REST-сервисом необходимо настроенное [подключение к REST-сервису](../../integration/connections/list/rest-service.md). Выбор типа запроса (GET или POST), а так же определение списка параметров GET-запроса осуществляется при настройке этого подключения. Узел вызова REST-сервиса осуществляет проверку типа  ответа, и если полученный ответ не соответствует заявленному в параметре `"Тип Content-type ответа"` используемого подключения, то выходные наборы данных узла будут содержать сообщения об ошибке.

## Порты

### Входные порты

* ![ ](../../images/icons/app/node/ports/inputs/link_inactive.svg) — Подключение к REST-сервису (связь с компонентом *Подключение REST-сервиса*);
* ![ ](../../images/icons/app/node/ports/inputs-optional/variable_inactive.svg) — Управляющие переменные (переменные), необязательный;
* ![ ](../../images/icons/app/node/ports/inputs-optional/table_inactive.svg) — Источник данных запроса (таблица с параметрами запроса), необязательный.

### Выходные порты

* ![](../../images/icons/app/node/ports/outputs/table_inactive.svg) — Выходной набор данных (таблица с ответами сервиса);
* ![](../../images/icons/app/node/ports/outputs/table_inactive.svg) — Дополнительные данные (таблица с результатами выполнения запросов, описанием ошибок).

## Настройка

Мастер настройки вызова сервиса состоит из нескольких шагов.

### Настройка запроса

На данном шаге задаются параметры запроса. Слева расположен список полей входного набора данных. Справа расположен список принимаемых REST-сервисом параметров. Для дальнейшей настройки необходимо проставить связи между полями и параметрами, сделать это можно несколькими способами:

* Методом *Drag-and-drop* — перетащить метку поля из левого списка полей на элемент списка параметров запроса;
* В правой таблице выбрать нужный параметр запроса и в столбце *Связанные поля* выбрать из выпадающего списка метку поля из входного набора;
* использовать кнопку ![ ](../../images/icons/toolbar-controls/auto-connect_default.svg) *Связать все автоматически*, при этом происходит автоматическое связывание входных полей и параметров запроса, исходя из значений меток и типов данных полей входного набора и параметров.

> **Примечание**: Если связь между полем и объектом была установлена неправильно, ее можно удалить. Для этого нужно выбрать метку и нажать на кнопку ![ ](../../images/icons/link-grid/remove-link_hover.svg) на линии связи. При необходимости удаления всех связей используется кнопка ![ ](../../images/icons/toolbar-controls/remove-all-links_default.svg) *Удалить все связи*.

При POST-запросах поля входной таблицы связываются с предопределенным параметром `request`, принимающим тело HTTP-запроса.

Параметр **Наличие временной зоны** определяет указывается ли информация о [часовом поясе](https://ru.wikipedia.org/wiki/Список_часовых_поясов_по_странам) в рамках стандарта [ISO_8601](https://ru.wikipedia.org/wiki/ISO_8601) при передачи параметров GET-запроса типа `Дата/Время`. Возможные значения:

- Не указывать;
- Указывать всегда.

### Настройка пользовательских заголовков

На данном шаге задаются имена заголовков HTTP-запроса и их значения.

### Дополнительные параметры

- **Выдавать описание кодов завершения** — отображать описание ошибок, произошедших при отправке запроса, получении и разборе ответа сервиса;
- **Сохранять текст запроса на диск** — все запросы, отправленные сервису, записываются в указанную папку в файловом хранилище;
- **Имитировать запрос с ответом в файле** — при установке флага фактического запроса к сервису не происходит, а обработчик в качестве ответа сервиса подставляет содержимое указанного файла.