---
description: Компонент Формирование XML в Loginom. Преобразование таблицы в XML. Мастер настройки. Подключение к XSD-схеме.
---
# ![](./../../images/icons/components/data-to-xml_default.svg) Формирование XML

Компонент предназначен для преобразования таблицы в XML.

> **Важно**: для работы узла требуется предварительно создать [подключение к XSD-схеме](./../../integration/connections/list/schemes.md) и связать его с входным портом *Подключение к источнику XSD-схемы*. Подключение происходит аналогично [подключению к БД](./../../quick-start/database.md).

## Порты

### Вход

* ![](./../../images/icons/app/node/ports/inputs/link_inactive.svg) Подключение к источнику XSD-схемы (обязательный порт) — связь с узлом [подключения набора XSD-схем](./../../integration/connections/list/schemes.md).
* ![](./../../images/icons/app/node/ports/inputs/table_inactive.svg) Источник данных — набор данных, подлежащий преобразованию.
* ![](./../../images/icons/app/node/ports/inputs-optional/variable_inactive.svg) [Управляющие переменные](./../../workflow/variables/control-variables.md) (необязательный порт) — переменными порта можно задать значения параметров мастера настройки. Для отображения порта необходимо в контекстном меню узла выбрать пункт *Показать порт управляющих переменных*.

### Выход

* ![](./../../images/icons/app/node/ports/inputs/table_inactive.svg) Выходной набор данных — таблица, содержащая результирующие XML и их идентификаторы (ID).

## Мастер настройки

### Шаг 1. Сопоставление полей для формирования XML

* **Подключение** — состояние подключения к XSD-схеме.
* **Корневой элемент** — выбор корневого элемента XSD-схемы, структура которого описывает результирующий XML.
* **Связывание объектов** — представлены списки полей входной таблицы и элементов схемы результирующего XML. Необходимо проставить связи между полями таблицы и элементами схемы XML. Сделать это можно несколькими способами:
  * Методом *Drag-and-drop* — перетащить метку поля из левого списка полей на элемент схемы XML. Типы данных поля таблицы и связываемого элемента должны совпадать.
  * В правой таблице выбрать нужный элемент схемы XML и в столбце *Связанные поля* выбрать из выпадающего списка метку поля входной таблицы. Фильтр выпадающего списка в состоянии ![](./../../images/icons/ext/filter-switcher/filterswitch-on_default.svg) оставляет только те поля, которые еще не связаны с какими-либо элементами, а в состоянии ![](./../../images/icons/ext/filter-switcher/filterswitch-off_default.svg) — предоставляет к выбору все поля.
  * использовать кнопку ![](./../../images/icons/common/toolbar-controls/auto-connect_default.svg) *Связать все автоматически*, при этом происходит автоматическое связывание, исходя из значений меток и типов данных полей входной таблицы и элементов схемы XML.

> **Примечание**: если связь между полем и объектом была установлена неправильно, ее можно удалить. Для этого нужно выбрать метку и нажать на кнопку ![](./../../images/icons/link-grid/remove-link_hover.svg) на линии связи. При необходимости удаления всех связей используется кнопка ![](./../../images/icons/common/toolbar-controls/remove-all-links_default.svg) *Удалить все связи*.

* **Наличие временной зоны** — определяет указывается ли информация о [часовом поясе](https://ru.wikipedia.org/wiki/Список_часовых_поясов_по_странам) в рамках стандарта [ISO_8601](https://ru.wikipedia.org/wiki/ISO_8601) в элементах XML, содержащих дату и/или время. Возможные значения:
  * Не указывать.
  * Не указывать для даты — не указывать временную зону для элементов типа [date](https://www.w3.org/TR/xmlschema-2/#date).
  * Указывать всегда.

### Шаг 2. Параметры формирования XML

* **Идентификация XML-документа** — выбор одного из вариантов наполнения XML данными входной таблицы:
  * **Весь набор данных (используется по умолчанию)**  — все записи входной таблицы войдут в результирующий XML. В этом случае выходной набор данных содержит единственную запись.
  * **По строчкам** — для каждой записи входной таблицы сформируется XML. В этом случае выходной набор данных содержит такое же количество записей, что и во входной таблице. Выходной столбец *ID* содержит целое значение номера записи.
  * **По идентификатору** — записи входной таблицы группируются по указанному идентификатору. Для каждой группы записей сформируется XML. В этом случае выходной набор данных содержит количество записей, равное количеству уникальных значений идентификатора. Выходной столбец *ID* при данной настройке содержит значения идентификаторов.

> **Примечание**: если входной набор данных пустой, то на выходе количество строк равно нулю при любых настройках параметра *Идентификация XML-документа*.

* **Настройка форматирования** — область включает следующие флаги:
  * **Добавлять отступы и переводы строк** — в результирующем XML каждый элемент располагается в отдельной строке. Отступы строк задаются в соответствии с иерархией элементов.
  * **Экранировать табуляции и переводы строк в атрибутах** — замена в атрибутах результирующего XML символов табуляции на обозначение *`&#x9;`* и символа перевода строк на *`&#xA;`*
  * **Экранировать одинарные и двойные кавычки** — замена в результирующем XML одинарных кавычек на обозначение *`&apos;`* и двойных на *`&quot;`*.